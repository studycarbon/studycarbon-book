# CH03-复合数据类型

## 元组 （Tuples)

元组是一个固定大小的值集合，可以具有不同的类型，其中每个值都由其在元组中的位置标识。元组的一个示例是从函数返回多个值：

```
fn DoubleBoth(x: i32, y: i32) -> (i32, i32) {
  return (2 * x, 2 * y);
}
```

将此示例拆分开来：

* 返回值的类型是一个包含两个i32类型的元组。
* 该表达式使用元组的语法构建有两个i32值组成的元组。

这两个表达式(一个是函数声明中的返回值类型，一个是返回值)都是使用元组语法的表达式`(expr,expr)`，唯一的区别是元组表达式类型：一个是类型元组，另外一个是值元组。换句话说，元组类型是类型的元组。

元组的组件是按位置访问的，因此元素访问使用下标语法，但索引必须是编译时间常数：

```
fn DoubleTuple(x: (i32, i32)) -> (i32, i32) {
  return (2 * x[0], 2 * x[1]);
}
```

元组类型是一种`结构类型`。

## 结构体 （Struct types）

Carbon语言中也有结构体，其成员通过名称来区别而不是通过位置来区别，这些称为结构体。

结构类型和值都写在大括号`｛…｝`内。在这两种情况下，它们都有一个逗号分隔的成员列表，以句点`.`开头，后跟字段名。

* 在结构体中，字段名后跟冒号 `":"`和`类型`，如：

  > {.name:String, .count:i32}

* 在结构值（称为结构数据类文本或结构文本）中，字段名后跟等号`=`和`值`，如:

  > {.name=“Joe”，.count=3}

## 指针类型 （Pointer types）

类型T的指针到值的类型写为T*。Carbon语言中的指针不支持指针运算；唯一的指针操作是：

* 给定一个指针p，*p 指的是该指针指向的值。p->m和 (\*p).m，可以提供访问成员m的方式，是一种语法。
* 获取一个值 v 的地址，可以使用 &v，&v得到的是v的地址

Carbon语言中没有空指针。要表示可能不引用有效对象的指针，请使用类型Optional（T*）。

## 数组和切片 （Arrays and slices）

保存4个i32值的数组类型为`[i32;4]`，元组可以隐式转换成相同长度的数组，在明确数组大小情况下，数组大小可以省略，如：

```
var i: i32 = 1;
// `[i32;]` equivalent to `[i32; 3]` here.
var a: [i32;] = (i, i, i);
```

可以使用方括号`[…]`访问数组的元素，如：`a[i]`



